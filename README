espmake was created to assist with managing multiple esphome
project variants that share yaml source files.  espmake also
enables the sharing of pin definitions and configuration definitions
between yaml and C / C++ files - see main.yaml, config.h and pins.h
for examples of that.

espmake is basically a Makefile in this directory which you copy
into your esphome project directory and then run the make command.
Note that this assumes that the destination project doesn't have a
Makefile already. If it does, this Makefile could be renamed and included
from the project Makefile however that is left as an exercise for the reader.
The espmake Makefile, by defaults, run's main.yaml through the
c-preprocessor to generate file proj.0.yaml. To choose another yaml
file, pass MAIN=myMain.yaml as an argument to the make command.

Multiple project variants can be generated from the same main.yaml by
using the project "tag" feature of the Makefile.  To build for another
project tag, for example, specify PROJTAG=1 to your make command. Project
tags are text tags so PROJTAG=foo is also a valid project tag.
Project tags can vary the yaml sources using C-preprocessor directives
such as #if _PROJTAG_1 ... #endif.

There are some additional comments describing Makefile features in the
Makefile.

Once a yaml file is generated by the Makefile,  esphome commands
can be issued upon it, such as:

 esphome compile proj.0.yaml
 esphome upload  proj.0.yaml
 esphome logs    proj.0.yaml

See 'esphome -h' for more details on esphome commands

Intermediate C-preprocessed files are stored in ./proj.<PROJTAG>
They can be cleaned using 'make clean'.

espmake uses github project dehash (https://github.com/maartenwrs/dehash)
to remove hash-style comments from yaml sources before running them
through the c-preprocessor.

Thank you to Landon Rohatensky for the exemplary esphome yaml file
https://github.com/landonr/lilygo-tdisplays3-esphome used to demonstrate
espmake configuration, build and also as used in the test subdirectory.

Disclaimer: the author has not attempted to use espmake with Visual Studio.
