espmake was created to assist with managing multiple esphome
project builds that share yaml source files.  It also
allows sharing of pin definitions and configuration definitions
between yaml and C / C++ files - see pins.h and config.h for
examples of that.

espmake is basically a Makefile in this directory which you copy
into your esphome directory (assuming you don't have a Makefile already
- else you could attempt to include this Makefile from yours and tweak
accordingly).  The Makefile, by defaults, run's through the c-preprocessor
to generate file proj.0.yaml.

Multiple project variants can be generated from the same main.yaml by
using the project "tag" feature of the Makefile.  To build for another
project tag, for example, specify PROJTAG=1 to your make command.

There are some more comments describing Makefile features in the Makefile.

Once a yaml file is generated by the Makefile,  esphome commands
can be issued upon it, such as:

esphome compile proj.0.yaml
esphome upload  proj.0.yaml
esphome logs    proj.0.yaml

See 'esphome -h' for more details on esphome commands

Intermediate C-preprocessed files are stored in ./proj.<PROJTAG>
They can be cleaned using 'make clean'.

espmake uses dehash (https://github.com/maartenwrs/dehash) to 
remove hash-style comments from yaml sources before running them
through the c-preprocessor.

